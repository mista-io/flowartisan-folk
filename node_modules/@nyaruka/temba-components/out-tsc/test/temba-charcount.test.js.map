{"version":3,"file":"temba-charcount.test.js","sourceRoot":"","sources":["../../test/temba-charcount.test.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,OAAO,EAAE,MAAM,kBAAkB,CAAC;AAE3C,OAAO,EAAE,gBAAgB,EAAE,OAAO,EAAE,MAAM,cAAc,CAAC;AAEzD,MAAM,UAAU,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;AACjD,UAAU,CAAC,YAAY,CAAC,OAAO,EAAE,gBAAgB,CAAC,CAAC;AAEnD,MAAM,YAAY,GAAG,KAAK,EAAE,IAAY,EAAE,EAAE;IAC1C,MAAM,OAAO,GAAc,MAAM,OAAO,CAAC,IAAI,EAAE,EAAE,UAAU,EAAE,CAAC,CAAC;IAC/D,OAAO,OAAO,CAAC;AACjB,CAAC,CAAC;AAEF,QAAQ,CAAC,iBAAiB,EAAE,GAAG,EAAE;IAC/B,EAAE,CAAC,mBAAmB,EAAE,KAAK,IAAI,EAAE;QACjC,MAAM,OAAO,GAAG,MAAM,YAAY,CAChC,4DAA4D,CAC7D,CAAC;QACF,MAAM,gBAAgB,CAAC,cAAc,EAAE,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC;IAC3D,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,kBAAkB,EAAE,KAAK,IAAI,EAAE;QAChC,MAAM,OAAO,GAAc,MAAM,YAAY,CAC3C,6DAA6D,CAC9D,CAAC;QACF,yCAAyC;QACzC,MAAM,gBAAgB,CAAC,kBAAkB,EAAE,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC;IAC/D,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,gBAAgB,EAAE,KAAK,IAAI,EAAE;QAC9B,MAAM,OAAO,GAAc,MAAM,YAAY,CAC3C,8IAA8I,CAC/I,CAAC;QACF,MAAM,gBAAgB,CAAC,iBAAiB,EAAE,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC;IAC9D,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,+BAA+B,EAAE,KAAK,IAAI,EAAE;QAC7C,MAAM,OAAO,GAAc,MAAM,YAAY,CAC3C,mJAAmJ,CACpJ,CAAC;QACF,MAAM,gBAAgB,CAAC,2BAA2B,EAAE,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC;IACxE,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,qBAAqB,EAAE,KAAK,IAAI,EAAE;QACnC,MAAM,OAAO,GAAc,MAAM,YAAY,CAC3C,mJAAmJ,CACpJ,CAAC;QAEF,MAAM,IAAI,GAAG,MAAa,CAAC;QAE3B,8CAA8C;QAC9C,MAAM,IAAI,GAAG,OAAO,CAAC,OAAO,CAAC,CAAC;QAC9B,IAAI,CAAC,MAAM,GAAG,GAAG,CAAC;QAElB,oDAAoD;QACpD,MAAM,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,KAAK,GAAG,EAAE,EAAE,IAAI,CAAC,GAAG,GAAG,EAAE,CAAC,CAAC;QACrD,MAAM,gBAAgB,CAAC,iBAAiB,EAAE,IAAI,CAAC,CAAC;QAEhD,oCAAoC;QACpC,MAAM,IAAI,CAAC,SAAS,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IAC7B,CAAC,CAAC,CAAC;AACL,CAAC,CAAC,CAAC","sourcesContent":["import { fixture } from '@open-wc/testing';\nimport { CharCount } from '../src/charcount/CharCount';\nimport { assertScreenshot, getClip } from './utils.test';\n\nconst parentNode = document.createElement('div');\nparentNode.setAttribute('style', ' width: 250px;');\n\nconst getCharCount = async (html: string) => {\n  const counter: CharCount = await fixture(html, { parentNode });\n  return counter;\n};\n\ndescribe('temba-charcount', () => {\n  it('counts plain text', async () => {\n    const counter = await getCharCount(\n      \"<temba-charcount text='count this text'></temba-charcount>\"\n    );\n    await assertScreenshot('counter/text', getClip(counter));\n  });\n\n  it('counts variables', async () => {\n    const counter: CharCount = await getCharCount(\n      \"<temba-charcount text='hi @contact.name'></temba-charcount>\"\n    );\n    // assert(counter).instanceOf(CharCount);\n    await assertScreenshot('counter/variable', getClip(counter));\n  });\n\n  it('counts unicode', async () => {\n    const counter: CharCount = await getCharCount(\n      \"<temba-charcount text='Messages with ðŸŽ± count extra segments after 70 characters. This message should show two segments.'></temba-charcount>\"\n    );\n    await assertScreenshot('counter/unicode', getClip(counter));\n  });\n\n  it('counts unicode with variables', async () => {\n    const counter: CharCount = await getCharCount(\n      \"<temba-charcount text='@contact.name with ðŸŽ± count extra segments after 70 characters. This message should show two segments.'></temba-charcount>\"\n    );\n    await assertScreenshot('counter/unicode-variables', getClip(counter));\n  });\n\n  it('shows hover summary', async () => {\n    const counter: CharCount = await getCharCount(\n      \"<temba-charcount text='@contact.name with ðŸŽ± count extra segments after 70 characters. This message should show two segments.'></temba-charcount>\"\n    );\n\n    const page = window as any;\n\n    // make room for our summary in the screenshot\n    const clip = getClip(counter);\n    clip.height = 250;\n\n    // move our mouse over the count to show the summary\n    await page.moveMouse(clip.right - 15, clip.top + 15);\n    await assertScreenshot('counter/summary', clip);\n\n    // put our cursor back in the corner\n    await page.moveMouse(0, 0);\n  });\n});\n"]}