{"version":3,"file":"TicketList.js","sourceRoot":"","sources":["../../../src/list/TicketList.ts"],"names":[],"mappings":";AAAA,OAAO,EAAE,IAAI,EAAkB,MAAM,KAAK,CAAC;AAC3C,OAAO,EAAE,QAAQ,EAAE,MAAM,gBAAgB,CAAC;AAC1C,OAAO,EAAE,SAAS,EAAE,MAAM,aAAa,CAAC;AACxC,OAAO,EAAE,SAAS,EAAE,MAAM,UAAU,CAAC;AAErC,OAAO,EAAE,YAAY,EAAE,MAAM,oBAAoB,CAAC;AAElD,MAAM,OAAO,UAAW,SAAQ,SAAS;IAcvC;QACE,KAAK,EAAE,CAAC;QAbV,UAAK,GAAG,EAAE,CAAC;QAeT,IAAI,CAAC,QAAQ,GAAG,aAAa,CAAC;QAC9B,IAAI,CAAC,YAAY,GAAG,CAAC,OAAgB,EAAkB,EAAE;YACvD,OAAO,IAAI,CAAA;;;;;;;;;;;kBAWC,OAAO,CAAC,IAAI;;gBAEd,OAAO,CAAC,MAAM,CAAC,SAAS;gBACxB,CAAC,CAAC,IAAI;gBACN,CAAC,CAAC,OAAO,CAAC,QAAQ;oBAClB,CAAC,CAAC,IAAI,CAAA;;;;wBAKE,OAAO,CAAC,QAAQ,CAAC,SAAS,KAAK,GAAG;wBAChC,CAAC,CAAC,IAAI,CAAA;;oCAEI;wBACV,CAAC,CAAC,IACN;wBAEE,OAAO,CAAC,QAAQ,CAAC,IAAI;wBACnB,CAAC,CAAC,OAAO,CAAC,QAAQ,CAAC,IAAI;wBACvB,CAAC,CAAC,OAAO,CAAC,QAAQ,CAAC,WAAW;4BAC9B,CAAC,CAAC,IAAI,CAAA;;;;;;;mCAOG;4BACT,CAAC,CAAC,qBACN;;mBAEH;oBACH,CAAC,CAAC,IAAI;;;;;;kBAMJ,SAAS,CACT,IAAI,IAAI,CACN,OAAO,CAAC,MAAM,CAAC,SAAS,IAAI,OAAO,CAAC,MAAM,CAAC,gBAAgB,CAC5D,CACF;;;kBAGC,CAAC,OAAO,CAAC,MAAM,CAAC,SAAS,IAAI,OAAO,CAAC,MAAM,CAAC,QAAQ;gBACpD,CAAC,CAAC,IAAI,CAAA,GAAG,YAAY,CAAC,OAAO,CAAC,MAAM,CAAC,QAAQ,EAAE,IAAI,CAAC,KAAK,CAAC,EAAE;gBAC5D,CAAC,CAAC,IAAI;;;;;OAKjB,CAAC;QACJ,CAAC,CAAC;IACJ,CAAC;IAhFM,kBAAkB;QACvB,IAAI,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,EAAE;YACzB,MAAM,YAAY,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,gBAAgB,CAAC;YAC3D,OAAO,CACL,IAAI,CAAC,QAAQ,GAAG,SAAS,GAAG,IAAI,IAAI,CAAC,YAAY,CAAC,CAAC,OAAO,EAAE,GAAG,IAAI,CACpE,CAAC;SACH;QACD,OAAO,IAAI,CAAC,QAAQ,CAAC;IACvB,CAAC;CAyEF;AAnFC;IADC,QAAQ,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;yCAChB","sourcesContent":["import { html, TemplateResult } from 'lit';\nimport { property } from 'lit/decorators';\nimport { TembaList } from './TembaList';\nimport { timeSince } from '../utils';\nimport { Contact } from '../interfaces';\nimport { renderAvatar } from '../contacts/events';\n\nexport class TicketList extends TembaList {\n  @property({ type: String })\n  agent = '';\n\n  public getRefreshEndpoint() {\n    if (this.items.length > 0) {\n      const lastActivity = this.items[0].ticket.last_activity_on;\n      return (\n        this.endpoint + '?after=' + new Date(lastActivity).getTime() * 1000\n      );\n    }\n    return this.endpoint;\n  }\n\n  constructor() {\n    super();\n\n    this.valueKey = 'ticket.uuid';\n    this.renderOption = (contact: Contact): TemplateResult => {\n      return html`\n        <div\n          style=\"align-items:center; margin-top: 0.1em; margin-bottom: 0.1em\"\n        >\n          <div\n            style=\"display:flex; align-items: flex-start;border:0px solid red;\"\n          >\n            <div style=\"flex: 1; color:#333;\">\n              <div\n                style=\"font-weight:400;line-height:1.6;border:0px solid purple;\"\n              >\n                ${contact.name}\n              </div>\n              ${contact.ticket.closed_on\n                ? null\n                : contact.last_msg\n                ? html`\n                    <div\n                      style=\"font-size: 0.9em; display: -webkit-box;  -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden;\"\n                    >\n                      ${\n                        contact.last_msg.direction === 'I'\n                          ? html`<div\n                              style=\"border-radius:9999px; background:var(--color-primary-dark);width:6px;height:6px;display:inline-block;margin:0px 2px;margin-bottom:1px;\"\n                            ></div>`\n                          : null\n                      }\n                      ${\n                        contact.last_msg.text\n                          ? contact.last_msg.text\n                          : contact.last_msg.attachments\n                          ? html`<div style=\"display:inline-block\">\n                              <div style=\"display:flex; margin-left:0.2em\">\n                                <temba-icon name=\"paperclip\"></temba-icon>\n                                <div style=\"flex-grow:1;margin-left:0.2em\">\n                                  Attachment\n                                </div>\n                              </div>\n                            </div>`\n                          : 'Unsupported Message'\n                      }\n                    </div></div>\n                  `\n                : null}\n            </div>\n            <div\n              style=\"font-size:0.8em;display:flex;flex-direction:column;align-items:flex-end;max-width:60px;min-width:30px;border:0px solid green;text-align:right\"\n            >\n              <div style=\"padding:4px;padding-bottom:2px\">\n                ${timeSince(\n                  new Date(\n                    contact.ticket.closed_on || contact.ticket.last_activity_on\n                  )\n                )}\n              </div>\n              <div style=\"font-size:0.7em;\">\n                ${!contact.ticket.closed_on && contact.ticket.assignee\n                  ? html`${renderAvatar(contact.ticket.assignee, this.agent)}`\n                  : null}\n              </div>\n            </div>\n          </div>\n        </div>\n      `;\n    };\n  }\n}\n"]}